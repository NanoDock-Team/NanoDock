<div class="min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 py-8">
  <div class="container mx-auto px-4 max-w-6xl">
    
    <!-- T√≠tulo Principal -->
    <div class="text-center mb-8">
      <h1 class="text-5xl font-bold bg-gradient-to-r from-cyan-400 via-purple-400 to-pink-400 bg-clip-text text-transparent font-mono mb-4">
        üéÆ PIEDRA, PAPEL O TIJERA
      </h1>
      <p class="text-cyan-300 text-xl font-mono">¬°Elige tu opci√≥n y desaf√≠a a la CPU!</p>
    </div>

    <!-- Selecci√≥n de Modalidad -->
    <div class="bg-black/40 backdrop-blur-sm rounded-3xl p-6 mb-6 border-2 border-cyan-400/50 shadow-2xl">
      <h2 class="text-cyan-400 font-mono text-xl mb-4 text-center">üé≤ SELECCIONA LA MODALIDAD</h2>
      <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
        <button 
          *ngFor="let modalidad of modalidades"
          (click)="cambiarModalidad(modalidad.id)"
          [ngClass]="{'border-yellow-400 shadow-yellow-400/30': modalidadSeleccionada.id === modalidad.id}"
          class="bg-gradient-to-br from-purple-600/50 to-blue-600/50 hover:from-purple-500/70 hover:to-blue-500/70 p-3 rounded-xl border border-cyan-400/30 hover:border-cyan-300 text-center transition-all duration-200 hover:scale-105">
          <h3 class="text-white font-mono font-bold">{{ modalidad.nombre }}</h3>
          <p class="text-cyan-300 text-sm mt-1">{{ modalidad.descripcion }}</p>
        </button>
      </div>
      <div class="mt-4 text-center">
        <div class="inline-block bg-cyan-600/30 px-4 py-2 rounded-lg">
          <p class="text-cyan-300 font-mono text-sm">Modalidad actual: <span class="text-yellow-400 font-bold">{{ modalidadSeleccionada.nombre }}</span></p>
        </div>
      </div>
    </div>

    <!-- Layout Principal: Juego a la izquierda, Historial a la derecha -->
    <div class="flex flex-col lg:flex-row gap-6">
      
      <!-- √Årea del Juego (Izquierda) -->
      <div class="lg:w-2/3 w-full">
        <div class="bg-black/40 backdrop-blur-sm rounded-3xl p-8 border-2 border-cyan-400/50 shadow-2xl h-full">
          
          <!-- Progreso de la partida -->
          <div class="text-center mb-6">
            <div class="flex justify-center items-center space-x-2 mb-2">
              <div [ngClass]="{'text-yellow-400': !partidaTerminada, 'text-green-400': partidaTerminada && ganadorPartida === 'jugador', 'text-red-400': partidaTerminada && ganadorPartida === 'cpu'}" class="font-mono font-bold text-2xl">
                {{ partidaTerminada ? (ganadorPartida === 'jugador' ? '¬°VICTORIA FINAL!' : '¬°DERROTA FINAL!') : 'PROGRESO DE PARTIDA' }}
              </div>
            </div>
            <div class="flex justify-center items-center space-x-4">
              <div class="text-green-400 font-mono font-bold text-3xl">{{ puntuacionJugador }}</div>
              <div class="text-white font-mono text-2xl">-</div>
              <div class="text-red-400 font-mono font-bold text-3xl">{{ puntuacionCPU }}</div>
            </div>
            <div *ngIf="!partidaTerminada" class="mt-2 text-cyan-300 font-mono text-sm">
              Faltan {{ obtenerRondasRestantes() }} victorias para que alguien gane
            </div>
            <div *ngIf="partidaTerminada" class="mt-2" [ngClass]="{'text-green-400': ganadorPartida === 'jugador', 'text-red-400': ganadorPartida === 'cpu'}">
              <span *ngIf="ganadorPartida === 'jugador'" class="font-mono font-bold">¬°FELICIDADES! Has ganado la partida üèÜ</span>
              <span *ngIf="ganadorPartida === 'cpu'" class="font-mono font-bold">La CPU ha ganado la partida ü§ñ</span>
            </div>
          </div>
          
          <!-- Resultado de la Ronda -->
          <div *ngIf="resultadoActual" class="text-center mb-8">
            <div class="bg-gradient-to-r from-purple-600/50 to-blue-600/50 rounded-2xl p-6 border border-purple-400/30">
              <h2 class="text-2xl font-mono font-bold text-white mb-4">{{ obtenerMensajeResultado() }}</h2>
              
              <!-- Visualizaci√≥n de Elecciones -->
              <div class="flex justify-center items-center space-x-8 mb-4">
                <!-- Elecci√≥n del Jugador -->
                <div class="text-center">
                  <div class="text-6xl mb-2">{{ obtenerDatosOpcion(resultadoActual.jugador)?.icono }}</div>
                  <p class="text-cyan-400 font-mono font-bold">JUGADOR</p>
                  <p class="text-white font-mono text-lg">{{ resultadoActual.jugador.toUpperCase() }}</p>
                </div>
                
                <!-- Separador VS -->
                <div class="text-4xl text-yellow-400 font-bold animate-pulse">‚ö° VS ‚ö°</div>
                
                <!-- Elecci√≥n de la CPU -->
                <div class="text-center">
                  <div class="text-6xl mb-2">{{ obtenerDatosOpcion(resultadoActual.cpu)?.icono }}</div>
                  <p class="text-red-400 font-mono font-bold">CPU</p>
                  <p class="text-white font-mono text-lg">{{ resultadoActual.cpu.toUpperCase() }}</p>
                </div>
              </div>
              
              <!-- Indicador de Ganador de Ronda -->
              <div [ngClass]="{
                'text-green-400': resultadoActual.ganador === 'jugador',
                'text-red-400': resultadoActual.ganador === 'cpu',
                'text-yellow-400': resultadoActual.ganador === 'empate'
              }" class="text-xl font-mono font-bold">
                <span *ngIf="resultadoActual.ganador === 'jugador'">üèÜ GANASTE LA RONDA</span>
                <span *ngIf="resultadoActual.ganador === 'cpu'">ü§ñ CPU GANA LA RONDA</span>
                <span *ngIf="resultadoActual.ganador === 'empate'">ü§ù EMPATE</span>
              </div>
            </div>
          </div>

          <!-- Mensaje Inicial (cuando no hay resultado) -->
          <div *ngIf="!resultadoActual" class="text-center mb-8">
            <div class="bg-gradient-to-r from-blue-600/30 to-purple-600/30 rounded-2xl p-8 border border-blue-400/30">
              <div class="text-6xl mb-4">üéØ</div>
              <p class="text-cyan-400 font-mono text-xl">Selecciona tu opci√≥n para comenzar</p>
              <p class="text-cyan-300 font-mono text-sm mt-2">{{ modalidadSeleccionada.descripcion }}</p>
            </div>
          </div>

          <!-- Botones de Selecci√≥n -->
          <div class="text-center mb-8">
            <h3 class="text-cyan-400 font-mono text-xl mb-6">Elige tu opci√≥n:</h3>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
              <button 
                *ngFor="let opcion of opcionesJuego"
                (click)="seleccionarOpcion(opcion.nombre)"
                [disabled]="partidaTerminada"
                [ngClass]="{'opacity-60 cursor-not-allowed': partidaTerminada}"
                class="group relative bg-gradient-to-br from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 rounded-2xl p-6 border-2 border-cyan-400/50 shadow-lg transform transition-all duration-300 hover:scale-105 hover:shadow-cyan-400/50 overflow-hidden">
                
                <!-- Efecto de Brillo -->
                <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700 pointer-events-none"></div>
                
                <div class="relative z-10 text-center">
                  <div class="text-5xl mb-3">{{ opcion.emoji }}</div>
                  <div class="text-4xl mb-2">{{ opcion.icono }}</div>
                  <p class="text-white font-mono font-bold text-lg">{{ opcion.nombre.toUpperCase() }}</p>
                </div>
              </button>
            </div>
          </div>

          <!-- Bot√≥n de Reinicio -->
          <div class="text-center">
            <button 
              (click)="reiniciarJuego()"
              class="bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-500 hover:to-pink-500 px-8 py-4 rounded-lg font-mono font-bold text-white border-2 border-red-400/50 transform transition-all duration-300 hover:scale-105 shadow-lg">
              üîÑ REINICIAR JUEGO
            </button>
          </div>
        </div>
      </div>
      
      <!-- Panel Lateral: Historial y Estad√≠sticas (Derecha) -->
      <div class="lg:w-1/3 w-full">
        <!-- Historial de Partidas Recientes -->
        <div class="bg-black/40 backdrop-blur-sm rounded-3xl p-6 border-2 border-purple-400/50 shadow-2xl mb-6">
          <h3 class="text-purple-400 font-mono text-xl mb-5 text-center">üèÜ PARTIDAS RECIENTES</h3>
          
          <!-- Si no hay partidas, mostrar mensaje -->
          <div *ngIf="historialReciente.length === 0" class="bg-gradient-to-r from-gray-800/50 to-gray-900/50 rounded-xl p-8 border border-gray-700/50 text-center">
            <div class="text-4xl mb-3">üìä</div>
            <p class="text-gray-400 font-mono">A√∫n no hay partidas registradas</p>
            <p class="text-cyan-400/70 text-sm mt-2 font-mono">¬°Juega tu primera partida!</p>
          </div>
          
          <!-- Lista de partidas recientes -->
          <div *ngIf="historialReciente.length > 0" class="space-y-4">
            <div *ngFor="let partida of historialReciente" 
                class="bg-gradient-to-r from-gray-800/50 to-gray-900/50 rounded-xl p-4 border border-gray-700/70 hover:border-purple-400/50 transition-all duration-300 hover:shadow-purple-500/20 hover:shadow-md">
              <div class="flex justify-between items-start mb-2">
                <span [ngClass]="{'text-green-400': partida.ganador === 'jugador', 'text-red-400': partida.ganador === 'cpu'}" class="font-mono font-bold text-lg">
                  {{ partida.ganador === 'jugador' ? 'üèÜ Victoria' : '‚ùå Derrota' }}
                </span>
                <span class="text-yellow-400 font-mono text-xl font-bold">{{ partida.puntuacionFinal }}</span>
              </div>
              
              <div class="flex justify-between items-center mt-1">
                <div>
                  <p class="text-white text-sm font-mono">{{ partida.modalidad }}</p>
                  <p class="text-gray-400 text-xs">{{ partida.rondasJugadas }} rondas</p>
                </div>
                <div class="text-right">
                  <p class="text-cyan-400 text-xs font-mono">{{ formatearFecha(partida.fecha) }}</p>
                  <p *ngIf="partida.duracion" class="text-gray-400 text-xs">{{ partida.duracion }}s</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Estad√≠sticas Generales (si hay al menos una partida) -->
        <div *ngIf="estadisticasGenerales && estadisticasGenerales.totalPartidas > 0" class="bg-black/40 backdrop-blur-sm rounded-3xl p-6 border-2 border-cyan-400/50 shadow-2xl">
          <h3 class="text-cyan-400 font-mono text-xl mb-5 text-center">üìà ESTAD√çSTICAS</h3>
          
          <div class="space-y-4">
            <!-- Total de partidas y favorita -->
            <div class="bg-gradient-to-r from-blue-800/30 to-blue-900/30 rounded-xl p-4 border border-blue-700/50">
              <div class="flex justify-between items-center mb-2">
                <p class="text-blue-300 font-mono">Total partidas</p>
                <p class="text-white font-mono font-bold text-xl">{{ estadisticasGenerales.totalPartidas }}</p>
              </div>
              <div class="flex justify-between items-center">
                <p class="text-blue-300 font-mono text-sm">Modalidad favorita</p>
                <p class="text-cyan-300 font-mono text-sm">{{ estadisticasGenerales.modalidadFavorita }}</p>
              </div>
            </div>
            
            <!-- Balance de victorias -->
            <div class="grid grid-cols-2 gap-3">
              <div class="bg-gradient-to-r from-green-800/30 to-green-900/30 rounded-xl p-4 border border-green-700/50 text-center">
                <p class="text-green-400 font-mono font-bold text-3xl">{{ estadisticasGenerales.victoriasJugador }}</p>
                <p class="text-green-300 font-mono text-sm">VICTORIAS</p>
              </div>
              <div class="bg-gradient-to-r from-red-800/30 to-red-900/30 rounded-xl p-4 border border-red-700/50 text-center">
                <p class="text-red-400 font-mono font-bold text-3xl">{{ estadisticasGenerales.victoriasCPU }}</p>
                <p class="text-red-300 font-mono text-sm">DERROTAS</p>
              </div>
            </div>
            
            <!-- Porcentaje de √©xito -->
            <div class="bg-gradient-to-r from-yellow-800/30 to-yellow-900/30 rounded-xl p-4 border border-yellow-700/50 text-center">
              <p class="text-yellow-300 font-mono text-sm">PORCENTAJE DE VICTORIA</p>
              <p class="text-yellow-400 font-mono font-bold text-3xl">{{ estadisticasGenerales.porcentajeExito.toFixed(1) }}%</p>
            </div>
          </div>
        </div>
      </div>
      
    </div>
  </div>
</div>